(function(e){function t(t){for(var r,o,a=t[0],c=t[1],u=t[2],l=0,h=[];l<a.length;l++)o=a[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==i[a]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={index:0},i={index:0},s=[];function a(e){return c.p+"static/js/"+({about:"about","event-listen":"event-listen",home:"home",meeting:"meeting",phone:"phone","point-call":"point-call",system:"system"}[e]||e)+"."+{about:"8edb9756","chunk-4cb3bfe1":"4e7baade","event-listen":"ad530f17",home:"bbafb8dd",meeting:"62cb0069",phone:"81753b96","point-call":"ace6f698",system:"9884e10b"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-4cb3bfe1":1,"event-listen":1,meeting:1,phone:1,system:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="static/css/"+({about:"about","event-listen":"event-listen",home:"home",meeting:"meeting",phone:"phone","point-call":"point-call",system:"system"}[e]||e)+"."+{about:"31d6cfe0","chunk-4cb3bfe1":"0e433876","event-listen":"e52fda5e",home:"31d6cfe0",meeting:"5ef29782",phone:"9734eff5","point-call":"31d6cfe0",system:"72c04d0c"}[e]+".css",i=c.p+r,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var u=s[a],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===i))return t()}var h=document.getElementsByTagName("style");for(a=0;a<h.length;a++){u=h[a],l=u.getAttribute("data-href");if(l===r||l===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete o[e],f.parentNode.removeChild(f),n(s)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=a(e);var h=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",h.name="ChunkLoadError",h.type=r,h.request=o,n[1](h)}i[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var h=0;h<u.length;h++)t(u[h]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00c0":function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t){await e.validate(t,{resId:{type:"string",required:!0},name:{type:"string"},x:{type:"string"},y:{type:"string"},width:{type:"number"},height:{type:"number"}}),await new Promise((n,r)=>{let o=e.getSysParam("RES_TYPE");e.exe.emit("OpenMonitor",{winId:"0000",resType:o||"0",resId:t.resId,name:t.name||t.resId,x:t.x||"0",y:t.y||"0",width:t.width||"600",height:t.height||"480"});const i=setTimeout(()=>{r(new e.BaseException(562))},6e4);e.exe.once("OnOpenMonitor",async t=>{console.log("打开设备监控OnOpenMonitor",t.resultCode),0===t.resultCode?(console.log("openMonitor","openOk"),clearTimeout(i),n()):(console.log("openMonitor","fail",t),r(new e.BaseException(561)))})})}},1345:function(e,t,n){"use strict";var r=n("f3dc"),o=n.n(r);o.a},"1baf":function(e,t,n){"use strict";n.r(t);var r=n("7d15");t["default"]=async function(e,t){await e.validate(t,{userAccount:{type:"string",required:!0}}),await new Promise(async(n,s)=>{let a=await Object(r["h"])({USER_ACCOUNT:t.userAccount},e);a&&a.ICP_CODE||s(new e.BaseException(417,"呼叫对象不存在或账号错误"));let c=Object(r["i"])(e,a);0!==c&&s(new e.BaseException(c)),e.exe.emit("PhoneCall",{isVideo:"0",callId:a.ICP_CODE,callType:"0"}),e.SEND_ICP_CODE=a.ICP_CODE;let u="",l="",h=t=>{console.log("unan",t),o(e,t,u,l)},f=t=>{console.log("an",t),i(e,t,u,l)};e.exe.once("PhoneCall",async t=>{console.log("data:",t),0===t.resultCode?(Object(r["d"])("2",e),e.exe.on("OnOppositeCallUnAnswer",h)):(Object(r["d"])("1",e),s(new e.BaseException(417,t.resultMsg||"呼叫失败"))),u=await Object(r["c"])({USER_CODE:a.USER_CODE,OPPO_NO:a.ICP_CODE,MEDIA_TYPE:"9",CALL_CHNL:"52",CALL_TYPE:"3"},e),l=await Object(r["b"])({USER_CODE:a.USER_CODE,AGENT_OPT_TYPE:"90",CALL_OBJ_ID:"2",IS_SUCCESS:"0"},e)});let p=setTimeout(()=>{s(new e.BaseException(417,"呼叫超时"))},1e4);e.exe.once("OnCall",t=>{console.log("Oncall",t),p&&clearTimeout(p),0===t.resultCode?(u&&Object(r["f"])(u,{CALLOUT_SUC:"1"},e),l&&Object(r["e"])(l,{IS_SUCCESS:"1"},e),e.exe.once("OnOppositeCallAnswer",t=>{console.log("handleOnOppositeCallAnswer",new Date),l&&Object(r["e"])(l,{AGENT_OPT_TYPE:"41"},e)}),n()):(u&&Object(r["f"])(u,{HANGUP_TYPE:"5"},e),l&&Object(r["e"])(l,{AGENT_OPT_TYPE:"23",OPT_DURATION:0},e),Object(r["d"])("1",e),s(new e.BaseException(417,t.resultMsg||"呼叫失败")))}),e.exe.once("OnCallConnected",t=>{console.log("OnCallConnected:",t),p&&clearTimeout(p),0===t.resultCode?(u&&Object(r["f"])(u,{CALLOUT_SUC:"1"},e),l&&Object(r["e"])(l,{IS_SUCCESS:"1",AGENT_OPT_TYPE:"41"},e),n()):(u&&Object(r["f"])(u,{HANGUP_TYPE:"5"},e),l&&Object(r["e"])(l,{AGENT_OPT_TYPE:"23",OPT_DURATION:0},e),Object(r["d"])("1",e),s(new e.BaseException(417,t.resultMsg||"呼叫失败")))}),e.exe.once("OnCallEnd",t=>{0===t.resultCode&&(console.log("OnCallEnd:",t),e.exe.off("OnOppositeCallUnAnswer",h),e.exe.off("OnOppositeCallAnswer",f),u&&Object(r["f"])(u,{HANGUP_TYPE:"2"},e),l&&Object(r["e"])(l,{OPT_DURATION:0},e),Object(r["d"])("1",e))}),e.exe.once("OnOppositeCallEnd",t=>{console.log("OnOppositeCallEnd",new Date),0===t.resultCode&&(u&&Object(r["f"])(u,{HANGUP_TYPE:"2"},e),l&&Object(r["e"])(l,{OPT_DURATION:0},e),Object(r["d"])("1",e))})})};let o=async(e,t,n,o)=>{console.log(t,n,o),0===t.resultCode&&(console.log("OnOppositeCallUnAnswer",new Date),n&&o?(Object(r["f"])(n,{HANGUP_TYPE:"5"},e),Object(r["e"])(o,{AGENT_OPT_TYPE:"34",OPT_DURATION:0},e),Object(r["d"])("1",e)):setTimeout(()=>{Object(r["f"])(n,{HANGUP_TYPE:"5"},e),Object(r["e"])(o,{AGENT_OPT_TYPE:"34",OPT_DURATION:0},e),Object(r["d"])("1",e)},3e3))},i=async(e,t,n,o)=>{0===t.resultCode&&(n&&Object(r["f"])(n,{CALLOUT_SUC:"1"},e),o&&Object(r["e"])(o,{IS_SUCCESS:"1"},e),e.exe.once("OnOppositeCallEnd",t=>{console.log("OnOppositeCallEnd",new Date),0===t.resultCode&&(n&&Object(r["f"])(n,{HANGUP_TYPE:"2"},e),o&&Object(r["e"])(o,{OPT_DURATION:0},e),Object(r["d"])("1",e))}))}},"2dc4":function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t){console.log(e),e.exe.emit("PhoneCallEnd",{isVideo:"1",callId:e.SEND_ICP_CODE,callType:0})}},"31cf":function(e,t,n){"use strict";n.r(t);var r=n("5d89");t["default"]=async function(e){await new Promise((t,n)=>{let o=`${r["a"]}/exe/implant-matrix?USER_CODE=${e.userInfo.USER_CODE}&LANGUAGE='ZH_CN'`;e.exe.emit("EnterMatrix",{url:o});let i=setTimeout(()=>{n(new e.BaseException(564)),clearTimeout(i)},6e4);e.exe.once("OnEnterMatrix",async r=>{console.log("打开监控矩阵OnEnterMatrix",r.resultCode),0===r.resultCode?(console.log("OnEnterMatrix","enter success"),clearTimeout(i),t()):(console.log("openMonitor","fail",r),n(new e.BaseException(563)))})})}},3569:function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t,n){return e.ajaxRequest([{DICT_TYPE:"",MAINTAIN_FLAG:"",QUERY_TEXT:"",QUERY_TYPE:"1",page:1,pagecount:10,pageoffset:1,rows:1,service:"P0102401"}]).then(e=>{if("0"===e.code)return Promise.resolve(e.data)})}},3815:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("5fb6");function o(e,t,n=!0){t.agentState=e;const o=t.userInfo.ORG_ID,i=`icp.store.employee.status.${o}`,s={status:e,user_code:t.userInfo.USER_CODE+"",org_id:o+"",type:1};r["a"].emit(i,s)}},"3d77":function(e,t,n){"use strict";n.r(t);var r=n("d01d"),o=n.n(r),i=n("bacb");function s(e,t,n,r,o){var i,s,c,u,l,h,f,p,d,m,g,y,E,v,b=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],_=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],w=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],O=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],T=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],C=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],S=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],A=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696],P=a(e),R=0,I=t.length,x=0,N=32===P.length?3:9;p=3===N?n?[0,32,2]:[30,-2,-2]:n?[0,32,2,62,30,-2,64,96,2]:[94,62,-2,32,64,2,30,-2,-2],t+="\0\0\0\0\0\0\0\0";var U="",D="";1===r&&(d=o.charCodeAt(R++)<<24|o.charCodeAt(R++)<<16|o.charCodeAt(R++)<<8|o.charCodeAt(R++),g=o.charCodeAt(R++)<<24|o.charCodeAt(R++)<<16|o.charCodeAt(R++)<<8|o.charCodeAt(R++),R=0);while(R<I){for(n?(h=t.charCodeAt(R++)<<16|t.charCodeAt(R++),f=t.charCodeAt(R++)<<16|t.charCodeAt(R++)):(h=t.charCodeAt(R++)<<24|t.charCodeAt(R++)<<16|t.charCodeAt(R++)<<8|t.charCodeAt(R++),f=t.charCodeAt(R++)<<24|t.charCodeAt(R++)<<16|t.charCodeAt(R++)<<8|t.charCodeAt(R++)),1===r&&(n?(h^=d,f^=g):(m=d,y=g,d=h,g=f)),c=252645135&(h>>>4^f),f^=c,h^=c<<4,c=65535&(h>>>16^f),f^=c,h^=c<<16,c=858993459&(f>>>2^h),h^=c,f^=c<<2,c=16711935&(f>>>8^h),h^=c,f^=c<<8,c=1431655765&(h>>>1^f),f^=c,h^=c<<1,h=h<<1|h>>>31,f=f<<1|f>>>31,s=0;s<N;s+=3){for(E=p[s+1],v=p[s+2],i=p[s];i!==E;i+=v)u=f^P[i],l=(f>>>4|f<<28)^P[i+1],c=h,h=f,f=c^(_[u>>>24&63]|O[u>>>16&63]|C[u>>>8&63]|A[63&u]|b[l>>>24&63]|w[l>>>16&63]|T[l>>>8&63]|S[63&l]);c=h,h=f,f=c}h=h>>>1|h<<31,f=f>>>1|f<<31,c=1431655765&(h>>>1^f),f^=c,h^=c<<1,c=16711935&(f>>>8^h),h^=c,f^=c<<8,c=858993459&(f>>>2^h),h^=c,f^=c<<2,c=65535&(h>>>16^f),f^=c,h^=c<<16,c=252645135&(h>>>4^f),f^=c,h^=c<<4,1===r&&(n?(d=h,g=f):(h^=m,f^=y)),D+=n?String.fromCharCode(h>>>24,h>>>16&255,h>>>8&255,255&h,f>>>24,f>>>16&255,f>>>8&255,255&f):String.fromCharCode(h>>>16&65535,65535&h,f>>>16&65535,65535&f),x+=n?16:8,512===x&&(U+=D,D="",x=0)}return U+D}function a(e){var t,n,r,o,i,s,a,c,u,l,h,f,p,d;t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261];for(var m,g,y,E,v,b=e.length>=24?3:1,_=new Array(32*b),w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],O=0,T=0,C=0;C<b;C++){E=e.charCodeAt(O++)<<24|e.charCodeAt(O++)<<16|e.charCodeAt(O++)<<8|e.charCodeAt(O++),v=e.charCodeAt(O++)<<24|e.charCodeAt(O++)<<16|e.charCodeAt(O++)<<8|e.charCodeAt(O++),y=252645135&(E>>>4^v),v^=y,E^=y<<4,y=65535&(v>>>-16^E),E^=y,v^=y<<-16,y=858993459&(E>>>2^v),v^=y,E^=y<<2,y=65535&(v>>>-16^E),E^=y,v^=y<<-16,y=1431655765&(E>>>1^v),v^=y,E^=y<<1,y=16711935&(v>>>8^E),E^=y,v^=y<<8,y=1431655765&(E>>>1^v),v^=y,E^=y<<1,y=E<<8|v>>>20&240,E=v<<24|v<<8&16711680|v>>>8&65280|v>>>24&240,v=y;for(var S=0;S<w.length;S++)w[S]?(E=E<<2|E>>>26,v=v<<2|v>>>26):(E=E<<1|E>>>27,v=v<<1|v>>>27),E&=-15,v&=-15,m=t[E>>>28]|n[E>>>24&15]|r[E>>>20&15]|o[E>>>16&15]|i[E>>>12&15]|s[E>>>8&15]|a[E>>>4&15],g=c[v>>>28]|u[v>>>24&15]|l[v>>>20&15]|h[v>>>16&15]|f[v>>>12&15]|p[v>>>8&15]|d[v>>>4&15],y=65535&(g>>>16^m),_[T++]=m^y,_[T++]=g^y<<16}return _}function c(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r=0;r<e.length;r++)t+=n[e.charCodeAt(r)>>4]+n[15&e.charCodeAt(r)];return t}function u(e,t){var n=s(t||"888888",e,1,0);return n=c(n),n}function l(e){var t='<?xml version="1.0" encoding="UTF-8"?><requests><![CDATA[',n=h(e);return t+=n,t+="]]></requests>",t}function h(e){for(var t="",n='{0}:"{1}"',r=0;r<e.length;r++){var o="{";for(var i in e[r]){var s=n.replace("{0}",i).replace("{1}",e[r][i]);o+="{"===o?s:","+s}o+="}",t+=""===t?o:","+o}return"{req:["+t+"]}"}var f=n("5d89"),p=n("3815");function d(e){let t=e.getSysParam("UDC_IP_PORT"),n=e.getSysParam("VC_IP_PORT"),r=e.getSysParam("VCN_IP_PORT"),o=e.getSysParam("PLATFORM_VERSION");const i={userInfo:{},udcaddr:t,vcaddr:n,vcnaddr:r,version:o};return Object.defineProperty(i,"userInfo",{get(){return e.userInfo}}),{async loginIn(t){let n=i.udcaddr.split(":")[0],r=i.udcaddr.split(":")[1],s=i.vcaddr.split(":")[0],a=i.vcaddr.split(":")[1],c=i.vcnaddr.split(":")[0],u=i.vcnaddr.split(":")[1],l={sdkVer:o,userName:String(i.userInfo.USER_CODE)};if("1"===o?(l.cluster=null,l.monitor=null,l.dispatch={userName:i.userInfo.ICP_CODE,password:i.userInfo.ICP_PWD,serverIp:n,serverPort:r}):(l.dispatch={userName:i.userInfo.ICP_CODE,password:i.userInfo.ICP_PWD,serverIp:s,serverPort:a},l.cluster={userName:i.userInfo.UDC_CODE,password:i.userInfo.UDC_PWD,serverIp:n,serverPort:r},l.monitor={userName:e.getSysParam("VCN_USER_ACCOUNT"),password:e.getSysParam("VCN_USER_PASS"),serverIp:c,serverPort:u}),"3"===e.agentState){t.emit("Login",l);let n={};1;const r=setTimeout(()=>{"function"===typeof n.close&&n.close(),t.emit("WriteBrowserLog",{logStr:"音视频服务启动失败"})},3e4);console.log("首次登录，调华为接口");let o=new Promise((o,i)=>{let s=setTimeout(()=>{i(new e.BaseException(501,"调度台登录超时，登录失败了！"))},6e4);t.once("OnDispatchLogin",t=>{0===t.resultCode&&(Object(p["a"])("1",e),e.sysLoginStatus.dispatch=!0,console.log("调度登录成功"),clearTimeout(s),o()),"function"===typeof n.close&&n.close(),clearTimeout(r)})}),i=new Promise((n,r)=>{let o=setTimeout(()=>{r(new e.BaseException(501,"监控台台登录超时，登录失败了！"))},6e4);t.once("OnMonitorLogin",t=>{0===t.resultCode&&(e.sysLoginStatus.monitor=!0,console.log("vcn登录成功"),clearTimeout(o),n())})});await Promise.all([o,i])}else Object(p["a"])("1",e)},loginOut(t){let n={userName:i.userInfo.ICP_CODE,sdkVer:o};t.emit("Logout",n),t.once("OnLogout",t=>{0===t.resultCode?(window.app.$message.success(window.app.$t("退出登录成功")),Object(p["a"])("3",e),window.app.$store.commit("M_SYS_LOGIN_STATUS",{dispatch:!1,monitor:!1,cluster:!1})):window.app.$message.error(window.app.$t(`退出登录失败,${t.resultMsg}`))})},sayBusy(){Object(p["a"])("2",e)}}}var m=d;t["default"]=async function(e,t){await g(e),await y(e,t),await e.nats.open(e),await E(e),await v(e),await b(e),console.log("星网中台登录成功"),e.agentState="1",_(e)};async function g(e){return Promise.all([Object(i["a"])({apiType:"UCC",method:"get",url:`/njdf_cache?cacheType=dictCache&language=${f["b"]}`}).then(t=>(Object.assign(e.dictList,t.data),Promise.resolve())),Object(i["a"])({apiType:"UCC",method:"get",url:`/njdf_cache?cacheType=sysParamCache&language=${f["b"]}`}).then(t=>(Object.assign(e.sysParam,t.data),Promise.resolve()))])}async function y(e,t){await e.validate(t,{userAccount:[{type:"string",required:!0}],password:[{type:"string",required:!0}]});const{userAccount:n,password:r}=t;o.a.set("account",n,{expires:720});let s=await Object(i["a"])({apiType:"UCC",method:"get",url:"/njdf_encrypkey"});s=s.data;const a=u(r,n),c={USER_ACCOUNT:n,TRD_PWD:a,VALIDATECODE:"",OP_LANGUAGE:f["b"]};let h=u(l([c]),s+""),p=await Object(i["a"])({apiType:"UCC",method:"post",url:"/njdf_login?encoderType=des",text:!0,data:h});if(p=p["data"],"0"!==p["IRETCODE"])throw new e.BaseException(501,`登录失败了，原因：${p.IRETINFO}`);p.ROLE_INFO&&p.ROLE_INFO.length?p.CURR_ROLE=p.ROLE_INFO[0].ROLE_CODE:p.CURR_ROLE=1,e.userInfo=p,e.public.userInfo={USER_ACCOUNT:p.USER_ACCOUNT,USER_CODE:p.USER_CODE,USER_NAME:p.USER_NAME,ORG_ID:p.ORG_ID,ROLE_INFO:p.ROLE_INFO}}async function E(e){await new Promise((t,n)=>{e.exe.open(()=>{e.exe.socketErr?n(new e.BaseException(511)):t()})})}async function v(e){await new Promise((t,n)=>{e.webServiceSocket.open(()=>{e.webServiceSocket.socketErr?n(new e.BaseException(514)):t()})})}async function b(e){const t=m(e);await t.loginIn(e.exe)}function _(e){let t=e.getSysParam("USER_STATUS_HEART_CHECK")?e.getSysParam("USER_STATUS_HEART_CHECK"):10;setInterval(()=>{"3"!==e.agentState&&Object(p["a"])(e.agentState,e,!1)},1e3*t),setInterval(()=>{"3"!==e.agentState&&e.exe.emit("HeartbeatDetection",{})},1e3*t),e.exe.on("OnHeartbeatDetection",t=>{0!==t.resultCode&&(Object(p["a"])("3",e),e.sysLoginStatus={dispatch:!1,monitor:!1,cluster:!1})})}},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("a026"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],s=(n("7faf"),n("2877")),a={},c=Object(s["a"])(a,o,i,!1,null,null,null),u=c.exports,l=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"default-layout-wrap"},[n("el-header",[n("div",{staticClass:"menu-wrap"},[n("m-header")],1),n("div",{staticClass:"user-info f-center"},[e.userInfo?n("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.logout}},[e._v("注销")]):e._e(),n("el-button",{attrs:{type:"info",size:"small"},on:{click:e.actionLog}},[e._v("日志")])],1)]),n("el-container",[n("el-main",[n("router-view")],1),n("el-drawer",{attrs:{title:"日志",visible:e.showDrawer},on:{"update:visible":function(t){e.showDrawer=t}}},[n("div",{staticClass:"global-logview"},e._l(e.actionLogs,(function(t,r){return n("div",{key:r,staticClass:"log-item",domProps:{innerHTML:e._s(t)}})})),0)])],1)],1)},f=[],p=n("2f62"),d=n("ae88"),m={name:"defaultLayout",components:{mHeader:()=>n.e("chunk-4cb3bfe1").then(n.bind(null,"3feb"))},data(){return{showDrawer:!1}},computed:{...Object(p["d"])({userInfo:e=>e.userInfo,actionLogs:e=>e.actionLogs})},methods:{...Object(p["c"])([d["a"].UPDATE_USER_INFO]),actionLog(){this.showDrawer=!0},async logout(){try{const e=await this.$confirm("您确定要注销登录?","提示",{type:"warning"});if(!e)return;const t=await this.$xw.logout();this.setLog({log:t,action:"注销登录[logout]"}),200===t.status&&(this.$message.success("注销登录成功"),this[d["a"].UPDATE_USER_INFO](null))}catch(e){this.setLog({log:e,action:"注销登录[logout]"}),"cancel"===e?this.$message.info("取消操作"):console.error("error",e)}}}},g=m,y=(n("1345"),Object(s["a"])(g,h,f,!1,null,"00f3f618",null)),E=y.exports,v={path:"/system",name:"system",component:E,redirect:"system",children:[{path:"login",name:"login",meta:{title:"登录"},component:()=>n.e("system").then(n.bind(null,"cb48"))},{path:"eventListen",name:"eventListen",meta:{title:"事件监听"},component:()=>n.e("event-listen").then(n.bind(null,"ba24"))}]},b={path:"/pointCall",name:"pointCall",component:E,redirect:"system",children:[{path:"video",name:"videoPointCall",meta:{title:"视频点呼"},component:()=>n.e("point-call").then(n.bind(null,"0d77"))},{path:"audio",name:"audioPointCall",meta:{title:"音频点呼"},component:()=>n.e("point-call").then(n.bind(null,"e51e"))}]},_={path:"/phone",name:"phone",component:E,redirect:"index",children:[{path:"index",name:"phoneIndex",meta:{title:"电话"},component:()=>n.e("phone").then(n.bind(null,"9545"))}]},w={path:"/meeting",name:"meeting",component:E,redirect:"index",children:[{path:"index",name:"meetingIndex",meta:{title:"会议"},component:()=>n.e("meeting").then(n.bind(null,"a0ee"))}]},O={path:"/monitor",name:"monitor",component:E,redirect:"index",children:[{path:"index",name:"monitorIndex",meta:{title:"监控"},component:()=>n.e("phone").then(n.bind(null,"b3e2"))}]},T={path:"/im",name:"im",component:E,redirect:"index",children:[{path:"index",name:"imIndex",meta:{title:"IM"},component:()=>n.e("phone").then(n.bind(null,"e4f8"))}]},C=[{path:"/",name:"layout",component:E,redirect:"home",children:[{path:"home",name:"home",meta:{title:"首页"},component:()=>n.e("home").then(n.bind(null,"bb51"))}]},v,b,_,w,O,T,{path:"/about",name:"about",meta:{title:"关于"},component:()=>n.e("about").then(n.bind(null,"f820"))}];r["default"].use(l["a"]);const S=new l["a"]({mode:"history",base:"/",routes:C});var A=S;r["default"].use(p["a"]);const P={USER_INFO:"_USER_INFO_"};var R=new p["a"].Store({state:{userInfo:JSON.parse(sessionStorage.getItem(P.USER_INFO))||null,actionLogs:[]},mutations:{[d["a"].UPDATE_USER_INFO](e,t){console.log("safasdf",t),e.userInfo=t,t?sessionStorage.setItem(P.USER_INFO,JSON.stringify(t)):sessionStorage.removeItem(P.USER_INFO)},[d["a"].UPDATE_LOGS](e,t){e.actionLogs.unshift(t)}},actions:{setLog({commit:e,state:t},{log:n,action:r}){const o=`\n        时间: ${(new Date).toLocaleString()} <br/>\n        请求接口: ${r||"无"} <br/>\n        结果: ${JSON.stringify(n)} <br/>\n      -------------------------------------------------------------\n      `;e(d["a"].UPDATE_LOGS,o)}},modules:{}}),I=n("5953"),x=n("80ea"),N=n("78c4"),U=n("cad1");class D extends U["a"]{async validate(e){try{await super.validate(e,{suppressWarning:!0})}catch(t){throw new N["a"](400,"",t)}}}var j=n("5fb6");n("3815");const M="http:"===window.location.protocol?"ws":"wss",k=`${M}://127.0.0.1:12700`;class L{constructor(e){this.xw=e,this.websocket=null,this.events={},this.reconnectTimer=null,this.openCallback=null,this.rebuildTimes=0,this.maxRebuildTimes=5,this.socketErr=!1}open(e){this.openCallback=e;try{this.websocket.close(),this.closeCallback=null}catch(t){}this.initWebsocket()}on(e,t,n){if(e&&t){let r={callback:t,callbackThis:n};this.events[e]?this.events[e].push(r):this.events[e]=[r]}else console.error("EventName and callback are required!");return this}once(e,t,n){if(e&&t){let r={callback:t,callbackThis:n,once:!0};this.events[e]?this.events[e].push(r):this.events[e]=[r]}else console.error("EventName and callback are required!");return this}emit(e,t){if(e&&t){let n={function:e,param:t};this.websocket&&1===this.websocket.readyState?this.websocket.send(JSON.stringify(n)):(this.initWebsocket(),setTimeout(()=>{this.websocket.send(JSON.stringify(n))},3e3),console.error("exeSocket send fail!"))}else console.error("SendType and param are required!");return this}off(e,t){return e&&t?this.events[e]&&this.events[e].length&&(this.events[e]=this.events[e].filter(e=>t!==e.callback)):console.error("EventName and fn are required!"),this}close(e){this.closeCallback=e||!0,this.websocket.close()}initWebsocket(){this.websocket=new WebSocket(k),this.websocket.onopen=()=>{clearTimeout(this.reconnectTimer),this.socketErr=!1,this.rebuildTimes=0,console.log("exeSocket Successful connection."),this.openCallback&&this.openCallback(),console.log("----------",this)},this.websocket.onclose=()=>{if(this.reconnectTimer=setTimeout(()=>{this.initWebsocket()},5e3),this.closeCallback){try{this.closeCallback()}catch(e){}clearTimeout(this.reconnectTimer),this.closeCallback=null}},this.websocket.onerror=e=>{this.xw.agentState,this.rebuildTimes++,this.rebuildTimes<this.maxRebuildTimes?(1!==this.rebuildTimes&&console.error(`exe通信连接失败,正在重新启动,重启次数${this.rebuildTimes}`),window.location.href="NICEAPP:*Playcall /seg=6502217909510670983:1:1 /un=Playbackuser /password=Playbackuser123 /url=10.7.5.204:62070"):this.socketErr||(this.socketErr=!0,this.openCallback&&this.openCallback()),console.error("exeSocket error",e)},this.websocket.onmessage=e=>{let t=JSON.parse(e.data);t["eventType"]&&this.events[t["eventType"]]&&(this.events[t["eventType"]].forEach(n=>{try{n&&n.callback&&(n.callbackThis?n.callback.call(n.callbackThis,t):n.callback(t))}catch(r){console.error(r,e)}}),this.events[t["eventType"]]=this.events[t["eventType"]].filter(e=>!e.once)),0!==t.resultCode&&8888===t.resultCode&&console.error(t.resultMsg)}}}var B=L,Y=n("5b52"),G=n("5d89");class q{constructor(e={}){const{pointToPointCall:t,meeting:n,phone:r,IM:o,monitor:i}=e;this.pointToPointCall=void 0===t||t,this.meeting=void 0===n||n,this.phone=void 0===r||r,this.IM=void 0===o||o,this.monitor=void 0===i||i;const s=new Proxy(this,{set(e,t,n){return"userInfo"===t&&Reflect.defineProperty(e,t,{value:n,writable:!0})}});return z.set(s,new V(s)),s}}class V{constructor(e){this.public=e,this.dictList=$,this.sysParam=F,this.userInfo={},this.BaseException=N["a"],this.nats=j["a"],this.agentState="3",this.SEND_ICP_CODE="",this.sysLoginStatus={dispatch:!1,cluster:!1,monitor:!1},this.exe=new B(this),this.webServiceSocket=new Y["a"](this),x["b"].set(this,new x["a"](this))}async validate(e,t){await new D(t).validate(e)}ajaxRequest(e){return Object(I["a"])(e,this)}emit(e,t){x["b"].get(this).emit(e,t)}getDict(e,t){return H(e,t)}getSysParam(e){return J(e)}}const z=new Map,$={},F={};function H(e,t){if(e){if($&&$[e]){let n=$[e][G["b"].toUpperCase()];if(n){if(!t)return""===t?"":n;for(let e=0;e<n.length;e++)if(n[e]["DICT_ITEM"]===t)return n[e]["DICT_ITEM_NAME"]}}}else console.error("getters.getDict：获取数据字典需要传入字典key值。")}function J(e){if(e){if(F&&F[e]&&F[e][0])return F[e][0]["PARAM_VAL"]}else console.error("getters.getSysParam：获取系统参数需要传入系统参数key值。")}const W={},K=n("5fa8");K.keys().forEach(e=>{const t=K(e),n=t.__esModule&&t.default?t.default:t,r=e.match(/^\.\/(.+)\/(.+)\/index\.js$/);n.type=r[1],W[r[2]]=n});var X=W,Q=n("cc8f");for(let re in X)Reflect.defineProperty(q.prototype,re,{value:async function(...e){let t=z.get(this);try{if("system"===X[re].type||"test"===X[re].type||this[X[re].type]){if("3"===t.agentState&&"system"!==X[re].type&&"test"!==X[re].type)throw new N["a"](401,`你当前处于离线或忙碌状态，调用星网中台 api：${re} 失败`);let n=await X[re](t,...e);return{status:200,msg:Q["a"][200],data:n}}throw new N["a"]("404",`调用的星网中台 api：${re} 未开放，请联系管理员！`)}catch(n){return n instanceof N["a"]?(console.error(n),n.parameterErrors&&console.error(`调用星网中台 api：${re} 入参错误详情：`,n.parameterErrors),n):new N["a"](500,`${Q["a"][500]} 调用星网中台api：${re} 失败！`)}},writable:!1});var Z=n("2ca7"),ee=n.n(Z),te=(n("46c6"),{data(){return{selfLogs:[]}},methods:{...Object(p["b"])({setLogs:"setLog"}),setLog(e){const{log:t,action:n}=e,r=`\n      时间: ${(new Date).toLocaleString()} <br/>\n      请求接口: ${n||"无"} <br/>\n      结果: ${JSON.stringify(t)} <br/>\n    -------------------------------------------------------------\n    `;this.selfLogs.unshift(r),this.setLogs(e)}}});let ne;ne=new window.XW({phone:!0}),r["default"].prototype.$xw=ne,r["default"].config.productionTip=!1,r["default"].use(ee.a),r["default"].mixin(te),new r["default"]({router:A,store:R,render:e=>e(u)}).$mount("#app")},5879:function(e,t,n){"use strict";n.r(t);var r=n("bacb");async function o(e){Object(r["a"])({apiType:"UCC",url:"/njdf_logout"}).then(t=>{"0"===t.code&&(e.userInfo={})}).catch(e=>{console.log(e)})}t["default"]=async function(e){await o(e)}},5953:function(e,t,n){"use strict";var r=n("bacb");const o={version:{version:"1.0.0"},config:{title:"",version:"1.0",minWidth:900,minHeight:300,language:"zh",base:"njs-base/",theme:"chinalife",style:"blank.png"},logining:!1,desVersion:"des",status:"init",treeData:[],groups:{},njdfmenus:[],childMenus:[],encKey:"",lockCallback:"",loginType:"w3c"};var i=o,s=n("f884"),a=n.n(s);class c{constructor(){this.config={title:"Aes加密工具类型"}}DesEncrypt(e,t){var n=a.a.enc.Utf8.parse(t),r=a.a.enc.Utf8.parse(e),o=a.a.DES.encrypt(r,n,{mode:a.a.mode.ECB,padding:a.a.pad.Pkcs7});return o.toString()}DesDecrypt(e,t){var n=a.a.enc.Utf8.parse(t),r=a.a.DES.decrypt(e,n,{mode:a.a.mode.ECB,padding:a.a.pad.Pkcs7});return a.a.enc.Utf8.stringify(r).toString()}}var u=new c,l=n("5d89"),h=n("78c4");const f=!0,p=f?l["c"].production:l["c"].development;let d={SERVICE:"service",PROGRAM:"menuId"},m={sessionTimeoutFlag:!1,baseUrl:""};m.ipUrl=window.location.origin+m.baseUrl,m.status="loaded";const g=function(e){var t,n;e.forEach((function(e){t=y(d.PROGRAM),n=y("F_SUBSYS"),t&&(e[d.PROGRAM]=t),n&&(e["F_SUBSYS"]=n)}))},y=function(e){var t=window.location.search,n=new RegExp(e+"=([^&]*)","ig"),r=t.match(n);return r&&r.length>0?r[0].substr(e.length+1):""},E=function(e,t){const n=t.userInfo,r=t.userInfo.CURR_ROLE;var o={LANGUAGE:l["b"],OP_CODE:n.USER_CODE||"",OP_ROLE:r||"",OP_BRANCH:n.ORG_ID||"",OP_SITE:n.LOG_IP||"",USER_TICKET_INFO:n.USER_TICKET_INFO||"",OP_WAY:"1",OP_LANGUAGE:l["b"],OP_PROGRAM:e[d.PROGRAM]||"",SERVER_ID:e[d.SERVICE]||"",MSG_ID:e[d.SERVICE],OP_LOGINTYPE:n.OP_LOGINTYPE||"",OP_USER_TYPE:n.USER_TYPE||""};return o},v=function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]={},n[r].REQ_MSG_HDR=E(e[r],t),e[r].apiType?n[r].REQ_COMM_DATA=e[r].data:n[r].REQ_COMM_DATA=e[r];return n},b=function(e){var t='<?xml version="1.0" encoding="UTF-8"?><requests><![CDATA[',n=m.jsonArryToString(e);return t+=n,t+="]]></requests>",t},_=function(e){let t=[{ANS_MSG_HDR:{MSG_CODE:"0",MSG_TEXT:"",RESULT_NUM:""},ANS_COMM_DATA:[]}];e&&e["ANSWERS"]&&(t=e["ANSWERS"]);let n=t,r=t[0]["ANS_MSG_HDR"]["MSG_CODE"],o=t[0]["ANS_MSG_HDR"]["MSG_TEXT"],i=t[0]["ANS_MSG_HDR"];if("0"===r||"100"===r||"-130011"===r||"-404"===r)n=t[0]["ANS_COMM_DATA"][0],3===t[0]["ANS_COMM_DATA"].length&&t[0]["ANS_COMM_DATA"][2]["CONFIG"]&&(t[0]["ANS_COMM_DATA"][2]["CONFIG"]=t[0]["ANS_MSG_HDR"]);else{if("10069"===r)throw new h["a"](410);if("2011"===r)throw new h["a"](408)}return{code:r,msg:o,data:n,head:i}},w=function(e,t){var n,r=e.req||[{}],o="0";r.length>0&&(o=r[0].service,n=r[0].isHttp);for(var s=0;s<r.length;s++){if("undefined"!==typeof r[s].service&&"P9999999"==r[s].service&&("undefined"===typeof r[s].bex_codes||""==r[s].bex_codes))return;"string"===typeof r[s].bex_codes&&"undefined"===typeof r[s].service&&(r[s].service="P9999999")}try{if(r[0]&&r[0].USER_CODE){var a=r[0].USER_CODE;a&&!$.isNumeric(a)&&(r[0].USER_CODE="")}if(r[0]&&r[0].CUST_CODE){a=r[0].CUST_CODE;a&&!$.isNumeric(a)&&(r[0].CUST_CODE="")}}catch(y){}g(r);var c="json",l="";"json"==c?(r=v(r,t),l='{"REQUESTS":'+JSON.stringify(r)+"}"):"xml"==c&&(l=b(e.req)),top&&top.njs_debugger;var h="none";e.encoderType&&(h=e.encoderType),"des"==h?l=u.encrypt(l,top.window.$kencKey?top.window.$kencKey:null):"desNew"==h?l=encryptNew(l,top.window.$kencKey?top.window.$kencKey:null):"base64"==h&&(l=BASE64.encoder(l));var f=m.ipUrl+p["UCC"]+(n?"/njdf_http?returnType=":"/njdf_ajax?returnType=")+c+"&service="+o+"&encoderType="+h+"&loginType="+i["loginType"];e.url&&(e.url+="&service="+o+"&encoderType="+h+"&loginType="+i["loginType"]);let d={url:e.url||f,data:l,contentType:"text/plain; charset=utf-8",dataType:c};return d},O=(e,t)=>{let n={async:!1,req:e,noProcess:!0};return w(n,t)};t["a"]=async(e,t)=>{let n=O(e,t);return Object(r["a"])({url:n.url,method:"post",data:n["data"],headers:{"Content-Type":n["contentType"]}}).then(e=>{let n=_(e.data,t);if(10069===+n.code)throw new h["a"](410);if(0!==+n.code)throw new h["a"](551,n.msg);return Promise.resolve(n)}).catch(e=>Promise.reject(e))}},"5b52":function(e,t,n){"use strict";var r=n("5d89");class o{constructor(e){this.xw=e,this.websocket=null,this.events={},this.reconnectTimer=null,this.openCallback=null,this.closeCallback=null,this.reconnectTimes=0,this.maxReConnectTimes=5,this.socketErr=!1}open(e){this.openCallback=e;try{this.websocket.close(),this.closeCallback=null}catch(t){}this.initWebsocket()}on(e,t,n){if(e&&t){let r={callback:t,callbackThis:n};this.events[e]?this.events[e].push(r):this.events[e]=[r]}else console.error("EventName and callback are required!");return this}once(e,t,n){if(e&&t){let r={callback:t,callbackThis:n,once:!0};this.events[e]?this.events[e].push(r):this.events[e]=[r]}else console.error("EventName and callback are required!");return this}emit(e){if(e)try{let t=e;t.acceptType="2",t.isExtend="0",t.sendId=this.xw.userInfo.USER_CODE,this.websocket&&1===this.websocket.readyState?this.websocket.send(JSON.stringify(t)):(this.initWebsocket(),setTimeout(()=>{this.websocket.send(JSON.stringify(t))},3e3),console.error("webService send fail!"))}catch(t){console.error("WebService Parameter format error!")}else console.error("SendType and param are required!");return this}off(e,t){return e&&t?this.events[e]&&this.events[e].length&&(this.events[e]=this.events[e].filter(e=>t!==e.callback)):console.error("EventName and fn are required!"),this}close(e){this.closeCallback=e||!0,this.websocket.close()}initWebsocket(){const e=this.xw.userInfo.USER_CODE,t=!0,n=t?r["c"].production:r["c"].development,o=n["UCC"],i="http:"===window.location.protocol?"ws":"wss",s=`${i}://${location.host}${o}/njdf_websocket?USER_CODE=${e}&SOCKET_TYPE=1`;this.websocket=new WebSocket(s),this.websocket.onopen=()=>{clearTimeout(this.reconnectTimer),this.socketErr=!1,this.reconnectTimes=0,console.log("webServiceSocket Successful connection."),this.openCallback&&this.openCallback(),console.log(this)},this.websocket.onclose=()=>{if(this.reconnectTimer=setTimeout(()=>{this.initWebsocket()},5e3),this.closeCallback){try{this.closeCallback()}catch(e){}clearTimeout(this.reconnectTimer),this.closeCallback=null}},this.websocket.onerror=e=>{console.error("webServiceSocket error",e,this),this.reconnectTimes<this.maxReConnectTimes?(this.reconnectTimes++,setTimeout(()=>{this.initWebsocket()},3e3)):this.socketErr||(this.socketErr=!0,this.openCallback&&this.openCallback())},this.websocket.onmessage=e=>{let t=JSON.parse(e.data);t["subtype"]&&this.events[t["subtype"]]&&(this.events[t["subtype"]].forEach(e=>{try{e&&e.callback&&(e.callbackThis?e.callback.call(e.callbackThis,t):e.callback(t))}catch(n){console.error(n)}}),this.events[t["subtype"]]=this.events[t["subtype"]].filter(e=>!e.once))}}}t["a"]=o},"5d89":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));const r={development:{UCC:"/ucc_server",AGENTGATEWAY:"/",NAGENT:"/nagent",CMS:"/",NATS_SERVER:"/natsService",MAP_SERVER:"/mapServer",MONITOR:"/monitor"},production:{UCC:"/ucc_server",AGENTGATEWAY:"/",NAGENT:"/agent",CMS:"/",NATS_SERVER:"/natsService",MAP_SERVER:"/mapServer",MONITOR:"/monitor"}},o="zh_CN",i="localhost:8916/"},"5fa8":function(e,t,n){var r={"./meeting/createConf/index.js":"a0d6","./monitor/enterMatrix/index.js":"31cf","./monitor/openMonitor/index.js":"00c0","./phone/callout/index.js":"8090","./pointToPointCall/dialVideo/index.js":"865b","./pointToPointCall/dialVideoHangUp/index.js":"2dc4","./pointToPointCall/dialVoice/index.js":"1baf","./pointToPointCall/dialVoiceHangUp/index.js":"7fee","./system/connect/index.js":"c697","./system/listen/index.js":"a12a","./system/login/index.js":"3d77","./system/logout/index.js":"5879","./test/chenjie/index.js":"3569","./test/chenpeng/index.js":"e0d4","./test/litao/index.js":"e5d2","./test/yaoliwu/index.js":"6700","./test/zhangjiancheng/index.js":"b4c7"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="5fa8"},"5fb6":function(e,t,n){"use strict";var r=n("5953"),o=n("78c4");n("aa27");const i="http:"===window.location.protocol?"ws":"wss";let s,a=[],c={};function u(){s&&(l(),s.close(),s=null,console.log("disconnect nats"))}function l(){if(s){let e=Object.keys(c);e.length>0&&(e.forEach(e=>{c[e].forEach(e=>{s.unsubscribe(e)})}),c={})}}function h(){u();try{s=window.NATS.connect({servers:a})}catch(e){throw new o["a"](522,"nats状态服务器连接失败,请联系管理员")}}let f={open(e){return Object(r["a"])([{service:"U1013403",NATS_TYPE:"1"}],e).then(e=>{if("0"===e.code)return 0===e.data.length?Promise.reject(new o["a"](522,"nats集群信息未配置,人员同步失败")):(a=e.data.map(e=>`${i}://${e.NATS_USER}:${e.NATS_PWD}@${e.NATS_URL}:${e.NATS_PORT}`),h(),Promise.resolve())})},emit(e,t){!s&&h();try{s.request(e,JSON.stringify(t),{max:1},(function(t){console.log(e+":\n"+JSON.stringify(JSON.parse(t),null,2))}))}catch(n){s.request(e,t,{max:1},(function(t){console.log(e+":\n"+JSON.stringify(JSON.parse(t),null,2))}))}return f},on(e,t,n){!s&&h();let r=s.subscribe(e,r=>{try{let e=JSON.parse(r);n?t&&t.call(n,e):t&&t(e)}catch(o){console.error(o,e)}});return c[e]?c[e].push(r):c[e]=[r],f.lastSid=r,f},off(e,t){return!s&&h(),c[e]&&(t?s.unsubscribe(t):(c[e].forEach(e=>{s.unsubscribe(e)}),console.error(`警告：已取消 ${e} 的所有订阅，如需取消某次订阅请同时传入 event 和 sid。`))),delete c[e],f},clear(){return l(),console.error("警告：已取消所有事件的所有订阅，如需取消单个事件的订阅请使用 off 方法！"),f},close(){u()}};t["a"]=f},6700:function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t,n){console.log(999)}},"78c4":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cc8f");class o extends Error{constructor(e,t,n){super(`${t||r["a"][e]} 错误码：${e}`),this.status=e,this.msg=t||r["a"][e],this.parameterErrors=n}}},"7d15":function(e,t,n){"use strict";n.d(t,"i",(function(){return o})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return f}));var r=n("5953");const o=(e,t)=>{let n=0;t.USER_code===e.userInfo.USER_CODE&&(n=416),t.ICP_CODE||(n=403);let r=e.agentState?parseInt(e.agentState,10):3;switch(r){case 2:n=414;break;case 3:n=415;break}let o=1;return 2===o?n=412:3===o&&(n=411),n},i=async(e,t)=>{const n={service:"E1201402",isHttp:!0};let o=await Object(r["a"])([Object.assign(n,e)],t).then(e=>"0"===e.code?e.data[0]:{});return o},s=function(e,t){let n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(let r in n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},a=async(e,t)=>{console.log(t,e),t.agentState=e},c=async(e,t)=>{const n={service:"E2802101"};let o=await Object(r["a"])([Object.assign(n,e)],t).then(e=>(console.log(e.data[0].ID),"0"===e.code?e.data[0].ID:""));return o},u=async(e,t)=>{const n={service:"E2801101"};let o=await Object(r["a"])([Object.assign(n,e)],t).then(e=>(console.log("------",e),"0"===e.code?e.data[0].ID:""));return o},l=async(e,t,n)=>{console.log("话务流水",n,e);const o={service:"E2801301",OPT_SNO:e};await Object(r["a"])([Object.assign(o,t)],n).then(e=>{})},h=async(e,t,n)=>{const o={service:"E2802301",CALL_SNO:e};await Object(r["a"])([Object.assign(o,t)],n).then(e=>{})},f=async(e,t)=>{const n={service:"E2804101"};await Object(r["a"])([Object.assign(n,e)],t).then(e=>{})}},"7faf":function(e,t,n){"use strict";var r=n("aa42"),o=n.n(r);o.a},"7fee":function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t){console.log(e),e.exe.emit("PhoneCallEnd",{isVideo:"0",callId:e.SEND_ICP_CODE,callType:0})}},8090:function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t){throw console.log(e.a),console.log(t),new Error("fekj")}},"80ea":function(e,t,n){"use strict";class r{constructor(){this.OnOffLineNotice={name:"上线 / 下线通知事件",module:"system"},this.OnDropped={name:"连接异常中断事件",module:"system"},this.OnReconnect={name:"自动重连成功事件",module:"system"},this.OnDialVoiceRequest={name:"语音点呼来电事件",module:"pointToPointCall"},this.OnDialVoiceDropped={name:"语音点呼挂机事件",module:"pointToPointCall"},this.OnDialVideoRequest={name:"视频点呼来电事件",module:"pointToPointCall"},this.OnDialVideoDropped={name:"视频点呼挂机事件",module:"pointToPointCall"},this.OnCloseMonitor={name:"关闭监控设备事件",module:"monitor"},this.OnExitMatrix={name:"退出矩阵监控事件",module:"monitor"}}}var o=new r;const i=(e,t,n)=>{e.emit("OnDialVoiceDropped",{callId:e.xw.SEND_ICP_CODE||"",type:t,msg:n.resultMsg||""}),setTimeout(()=>{e.xw.SEND_ICP_CODE=""})},s=(e,t)=>{e.emit("OnDialVoiceRequest",{callId:e.xw.SEND_ICP_CODE||"",caller:e.xw.userInfo.USER_ACCOUNT})},a=(e,t,n)=>{e.emit("OnDialVideoDropped",{callId:e.xw.SEND_ICP_CODE||"",type:t,msg:n.resultMsg||""}),setTimeout(()=>{e.xw.SEND_ICP_CODE=""})},c=(e,t)=>{e.emit("OnDialVideoRequest",{callId:e.xw.SEND_ICP_CODE||"",caller:e.xw.userInfo.USER_ACCOUNT})};var u=e=>{e.xw.exe.on("OnCallEnd",t=>{console.log("listen",t),0===t.resultCode?t.data.isVideo&&"0"!==t.data.isVideo?a(e,"1",t):i(e,"1",t):t.data.isVideo&&"0"!==t.data.isVideo?a(e,"2",t):i(e,"2",t)}),e.xw.exe.on("OnOppositeCallEnd",t=>{0===t.resultCode?t.data.isVideo&&"0"!==t.data.isVideo?a(e,"1",t):i(e,"1",t):t.data.isVideo&&"0"!==t.data.isVideo?a(e,"2",t):i(e,"2",t)}),e.xw.exe.on("OnOppositeCall",t=>{t.resultCode,t.data.isVideo&&"0"!==t.data.isVideo?c(e,t):s(e,t)})},l=e=>{e.xw.exe.on("OnCloseMonitor",t=>{console.log("OnCloseMonitor",t),0===t.resultCode&&e.emit("OnCloseMonitor",t.data)}),e.xw.exe.once("OnExitMatrix",async t=>{console.log("退出监控矩阵OnExitMatrix",t),0===t.resultCode&&e.emit("OnExitMatrix",t.data)})};n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));const h=new Map;class f{constructor(e){this.xw=e,this.eventTypes=o,this.listens={},this.initListens()}initListens(){for(let e in this.eventTypes)this.eventTypes.hasOwnProperty(e)&&(this.listens[e]=[]);u(this),l(this)}emit(e,t){if(!(e in this.eventTypes))throw new Error("星网中台内部报错：要派发的中台事件未定义！");("system"===this.eventTypes[e].module||this.xw.public[this.eventTypes[e].module])&&this.listens[e].forEach(e=>{try{e(t)}catch(n){console.error(n)}})}listen(e,t){if(!(e in this.eventTypes))throw new this.xw.BaseException(400,"你要监听的事件类型不存在，请参考星网中台开发手册！");if("system"!==this.eventTypes[e].module&&!this.xw.public[this.eventTypes[e].module])throw new this.xw.BaseException(411,"该星网中台事件，请联系管理员！");this.listens[e].push(t)}removeListen(e,t){}}},"865b":function(e,t,n){"use strict";n.r(t);var r=n("7d15");t["default"]=async function(e,t){console.log(e,t),await e.validate(t,{userAccount:{type:"string",required:!0}}),await new Promise(async(n,i)=>{let s=await Object(r["h"])({USER_ACCOUNT:t.userAccount},e);s&&s.ICP_CODE||i(new e.BaseException(417,"呼叫对象不存在或账号错误"));let a=Object(r["i"])(e,s);0!==a&&i(new e.BaseException(a)),console.log(s),e.exe.emit("PhoneCall",{isVideo:"1",callId:s.ICP_CODE,callType:"0"}),e.SEND_ICP_CODE=s.ICP_CODE;let c="",u="",l=t=>{o(e,t,c,u)};c=await Object(r["c"])({USER_CODE:s.USER_CODE,OPPO_NO:s.ICP_CODE,MEDIA_TYPE:"8",CALL_CHNL:"52",CALL_TYPE:"3"},e),u=await Object(r["b"])({USER_CODE:s.USER_CODE,AGENT_OPT_TYPE:"91",CALL_OBJ_ID:"2",IS_SUCCESS:"1"},e),console.log("phoneCallWaterCode",c,"  trafficWaterCode  ",u),e.exe.once("PhoneCall",async t=>{console.log("PhoneCall:",t),0===t.resultCode?(Object(r["f"])(c,{CALLOUT_SUC:"1"},e),Object(r["e"])(u,{IS_SUCCESS:"1"},e),console.log("change2"),Object(r["d"])("2",e)):(Object(r["d"])("1",e),e.exe.off("OnUpload",l),Object(r["e"])(u,{OPT_DURATION:0},e),i(new e.BaseException(417,t.resultMsg||"呼叫失败")))}),e.exe.on("OnUpload",l);let h=setTimeout(()=>{i(new e.BaseException(417,"呼叫超时"))},1e4),f="1"===e.sysParam.PLATFORM_VERSION[0].PARAM_VAL?"OnCall":"OnCallConnected";e.exe.once(f,t=>{h&&clearTimeout(h),0===t.resultCode?(Object(r["f"])(c,{CALLOUT_SUC:"1"},e),Object(r["e"])(u,{IS_SUCCESS:"1"},e),n()):(Object(r["d"])("1",e),e.exe.off("OnUpload",l),Object(r["e"])(u,{OPT_DURATION:0},e),i(new e.BaseException(417,t.resultMsg||"呼叫失败")))}),e.exe.once("OnOppositeCallEnd",t=>{console.log("视频监控OnOppositeCallEnd",t),Object(r["d"])("1",e),e.exe.off("OnUpload",l),u&&Object(r["e"])(u,{OPT_DURATION:0},e),c&&Object(r["f"])(c,{CALL_DURATION:0},e)}),e.exe.once("OnCallEnd",t=>{console.log("视频点呼OnCallEnd"),console.log("end",t),Object(r["d"])("1",e),e.exe.off("OnUpload",l),u&&Object(r["e"])(u,{OPT_DURATION:0},e),c&&Object(r["f"])(c,{CALL_DURATION:0},e)})})};let o=(e,t,n,o)=>{console.log("触发事件OnUpload",n),0===t.resultCode&&Object(r["a"])({SNO:n,REC_CUT_OUT_ADD:t.data.path,REC_SNO_TYPE:3,REC_TYPE:t.data.UPLOAD_TYPE,START_TIME:2===t.data.UPLOAD_TYPE?Object(r["g"])(new Date(1e3*t.data.start_time),"yyyy-MM-dd HH:mm:ss"):Object(r["g"])(new Date,"yyyy-MM-dd HH:mm:ss"),CUT_OUT_TIME:(t.data.UPLOAD_TYPE,Object(r["g"])(new Date,"yyyy-MM-dd HH:mm:ss")),END_TIME:2===t.data.UPLOAD_TYPE?Object(r["g"])(new Date(1e3*t.data.end_time),"yyyy-MM-dd HH:mm:ss"):Object(r["g"])(new Date,"yyyy-MM-dd HH:mm:ss")},e)}},a0d6:function(e,t,n){"use strict";n.r(t);var r=n("78c4");n("5b52");let o="",i="",s="",a=[],c="";t["default"]=async function(e,t){console.log(t),c=e.getSysParam("PLATFORM_VERSION");let{members:n,EVENT:o}=t;if(o||(o={EVENT_ID:"100001",EVENT_TYPE:2}),"1"!==e.agentState)throw new r["a"](421);const i={OBJ_TYPE:"2",OBJ_ID:String(e.userInfo.USER_CODE),OBJ_NAME:e.userInfo.USER_NAME,PART_DEV:"4",PART_SNO:e.userInfo.ICP_CODE,GLASS_NUM:e.userInfo.GLASS_NUM,USER_ICON:e.userInfo.USER_ICON};let s=n;if(s.push(i),s=d(s,"PART_SNO"),s.length<=1)throw new r["a"](420);"1"===c?(await u(e,s,o),await f(a,o)):(await h(e,s,o),await l(e,s,o))};function u(e,t,n){return e.ajaxRequest([{service:"E2601501",CREATE_MEET_FLAG:"1"===c?"1":"",MEETING_NAME:m(t,"2"),MEETING_TYPE:1,MEDIAENCRYPTTYPE:0,DURATION:1e3,EVENT_ID:n.EVENT_ID,HOST_USER:e.userInfo.USER_CODE,MEET_START_ID:e.userInfo.USER_CODE,MEMBERS:t,CONTINUOUSPRESENCEMODE:"0"}]).then(n=>{if("0"!==n.code)return Promise.reject(new e.BaseException(423));o=n.data[0].MEETING_ID,i=n.data[0].MEETING_SNO,s=m(t,"2"),a=n.data[0].MEMBERS})}function l(e,t,n){return new Promise((r,u)=>{e.ajaxRequest([{service:"E2601501",CREATE_MEET_FLAG:"1"===c?"1":"",MEETING_NAME:m(t,"2"),MEETING_TYPE:1,MEDIAENCRYPTTYPE:0,DURATION:1e3,EVENT_ID:n.EVENT_ID,HOST_USER:e.userInfo.USER_CODE,MEET_START_ID:e.userInfo.USER_CODE,MEMBERS:t,CONTINUOUSPRESENCEMODE:"0"}]).then(async c=>{if("0"===c.code){o=c.data[0].MEETING_ID,i=c.data[0].MEETING_SNO,s=m(t,"2"),a=c.data[0].MEMBERS,e.ajaxRequest([{service:"E2601302",MEETING_SNO:i,MEETING_ID:o,ACCESS_CODE:c.data[0].ACCESS_CODE,PASSCODE:c.data[0].PASSCODE}]);let u="http://"+window.document.location.host+"/exe/implant-meeting?USER_CODE="+e.userInfo.USER_CODE+"&LANGUAGE=ZH_CN&MDP_MEETING_SNO="+i+"&ROLE_ID="+e.userInfo.CURR_ROLE+"&MEET_PLAN_TYPE="+n.MEET_PLAN_TYPE+"&MDP_MEETING_ID="+o;n.EVENT_TYPE&&n.EVENT_LVL_ID&&(u+="&EVENT_TYPE="+n.EVENT_TYPE+"&EVENT_LVL_ID="+n.EVENT_LVL_ID),e.exe.emit("SetConfUrl",{confName:m(t,"2"),confUrl:u}),r()}else u(new e.BaseException(423))})})}function h(e,t,n){return new Promise((n,r)=>{e.exe.emit("SetConfUrl",{confName:m(t,"2"),confUrl:""}),e.exe.once("OnSetConfUrl",t=>{0===t.resultCode?n():r(new e.BaseException(423))})})}function f(e,t,n){return new Promise((r,o)=>{const s=p(t),a=window.document.location.host,c=e.userInfo.CURR_ROLE;let u="http://"+a+"/exe/implant-meeting?USER_CODE="+e.userInfo.USER_CODE+"&LANGUAGE=ZH_CN&MDP_MEETING_SNO="+i+"&ROLE_ID="+c+"&MEET_PLAN_TYPE="+n.MEET_PLAN_TYPE;n.EVENT_TYPE&&n.EVENT_LVL_ID&&(u+="&EVENT_TYPE="+n.EVENT_TYPE+"&EVENT_LVL_ID="+n.EVENT_LVL_ID),e.exe.emit("CreateConf",{resId:e.userInfo.ICP_CODE,isVideo:"1",memberInfo:s,confName:m(s,"2"),confUrl:u});let l=setTimeout(()=>{o(new e.BaseException(423))},3e4);e.exe.once("OnCreateConf",t=>{0===t.resultCode&&(e.ajaxRequest([{service:"E2601302",MEETING_SNO:i,MEETING_ID:t.data.confId,ACCESS_CODE:t.data.accessCode,PASSCODE:t.data.password}]),clearTimeout(l),r())})})}function p(e){let t=[];return e.forEach((e,n)=>{const r={};r.memberId=e.PART_SNO,r.memberName=e.OBJ_NAME||e.PART_SNO,r.glassNum=("3"!==e.PART_DEV||"6"===e.PART_DEV)&&e.GLASS_NUM||"",r.isMute="4"===e.USER_TYPE||"1"===e.OBJ_TYPE?"0":"1",r.isCamera="1"===e.OBJ_TYPE?"1":"0",r.isWatchOnly="0",r.OBJ_TYPE=e.OBJ_TYPE,r.OBJ_NAME=e.OBJ_NAME||e.PART_SNO,r.OBJ_ID=e.OBJ_ID,r.PART_SNO=e.PART_SNO,r.IS_MUTE=e.IS_MUTE,t.push(r)}),t}function d(e,t){const n=new Map;return e.filter(e=>!n.has(e[t])&&n.set(e[t],1))}function m(e,t,n=""){if("1"===t)return n;let r=[];return e.forEach(e=>{e.memberName&&r.push(e.memberName),e.OBJ_NAME&&r.push(e.OBJ_NAME)}),[...new Set(r)].join("、")}},a12a:function(e,t,n){"use strict";n.r(t);var r=n("80ea");t["default"]=async function(e,t,n){const o={eventType:t,callback:n};await e.validate(o,{callback:[{type:"method",required:!0}],eventType:[{type:"string",required:!0}]});const i=r["b"].get(e);i.listen(t,n)}},aa27:function(e,t){!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="/dist/",t(0)}([function(e,t,n){window.NATS=n(1)},function(e,t,n){(function(e,r){
/*!
    * Nats
    * Copyright(c) 2012-2016 Apcera Inc. All rights reserved.
    * Copyright(c) 2011-2014 Derek Collison (derek.collison@gmail.com)
    * MIT Licensed
    */
"use strict";function o(e){h.EventEmitter.call(this),this.parseOptions(e),this.initState(),this.createConnection()}function i(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function s(e){this.url=e,this.didConnect=!1,this.reconnects=0}var a=n(8),c=n(13),u=n(14),l=n(9),h=n(12),f=n(20),p="0.6.8",d=4222,m="nats://localhost:",g=m+d,y=512,E=0,v=1,b=2e3,_=10,w=/^MSG\s+([^\s\r\n]+)\s+([^\s\r\n]+)\s+(([^\s\r\n]+)[^\S\r\n]+)?(\d+)\r\n/i,O=/^\+OK\s*\r\n/i,T=/^-ERR\s+('.+')?\r\n/i,C=/^PING\r\n/i,S=/^PONG\r\n/i,A=/^INFO\s+([^\r\n]+)\r\n/i,P=/^SUB\s+([^\r\n]+)\r\n/i,R="\r\n",I=R.length,x=(new e(R),""),N=" ",U="SUB",D="UNSUB",j="CONNECT",M="PING"+R,k="PONG"+R,L="Subject must be supplied",B="Message can't be a function",Y="Reply can't be a function",G="Connection closed",q="Message should be a JSON object",V="User and Token can not both be provided",z=65536;t.version=p;var $=t.createInbox=function(){return"_INBOX."+f.next()};t.connect=function(e){return new o(e)},l.inherits(o,h.EventEmitter),o.prototype.createInbox=$,o.prototype.assignOption=function(e,t,n){void 0===n&&(n=t),void 0!==e[t]&&(this.options[n]=e[t])},o.prototype.parseOptions=function(t){var n=this.options={verbose:!1,pedantic:!1,reconnect:!0,maxReconnectAttempts:_,reconnectTimeWait:b,encoding:"utf8",tls:!1,waitOnFirstConnect:!1};void 0===t?n.url=g:"number"==typeof t?n.url=m+t:"string"==typeof t?n.url=t:"object"==typeof t&&(void 0!==t.port&&(n.url=m+t.port),this.assignOption(t,"url"),this.assignOption(t,"uri","url"),this.assignOption(t,"user"),this.assignOption(t,"pass"),this.assignOption(t,"token"),this.assignOption(t,"password","pass"),this.assignOption(t,"verbose"),this.assignOption(t,"pedantic"),this.assignOption(t,"reconnect"),this.assignOption(t,"maxReconnectAttempts"),this.assignOption(t,"reconnectTimeWait"),this.assignOption(t,"servers"),this.assignOption(t,"urls","servers"),this.assignOption(t,"noRandomize"),this.assignOption(t,"NoRandomize","noRandomize"),this.assignOption(t,"dontRandomize","noRandomize"),this.assignOption(t,"encoding"),this.assignOption(t,"tls"),this.assignOption(t,"secure","tls"),this.assignOption(t,"name"),this.assignOption(t,"client","name"),this.assignOption(t,"yieldTime"),this.assignOption(t,"waitOnFirstConnect"),this.assignOption(t,"json"));var r=this;if(r.user=n.user,r.pass=n.pass,r.token=n.token,r.user&&r.token)throw new Error(V);if(!e.isEncoding(n.encoding))throw new Error("Invalid Encoding:"+n.encoding);r.encoding=n.encoding,r.servers=[],Array.isArray(n.servers)?n.servers.forEach((function(e){r.servers.push(new s(u.parse(e)))})):(void 0===n.url&&(n.url=g),r.servers.push(new s(u.parse(n.url)))),!0!==n.noRandomize&&i(r.servers)},o.prototype.selectServer=function(){var e=this,t=e.servers.shift();if(e.currentServer=t,e.url=t.url,"auth"in t.url&&t.url.auth){var n=t.url.auth.split(":");1!==n.length?(void 0===e.options.user&&(e.user=n[0]),void 0===e.options.pass&&(e.pass=n[1])):void 0===e.options.token&&(e.token=n[0])}e.servers.push(t)},o.prototype.checkTLSMismatch=function(){return!0===this.info.tls_required&&!1===this.options.tls?(this.emit("error","Server requires a secure connection."),this.closeStream(),!0):!1===this.info.tls_required&&!1!==this.options.tls?(this.emit("error","Server does not support a secure connection."),this.closeStream(),!0):!0===this.info.tls_verify&&void 0===this.options.tls.cert&&(this.emit("error","Server requires a client certificate."),this.closeStream(),!0)},o.prototype.connectCB=function(){var e=this.reconnecting,t=!0===e?"reconnect":"connect";this.reconnecting=!1,this.reconnects=0,this.wasConnected=!0,this.currentServer.didConnect=!0,this.emit(t,this),this.flushPending()},o.prototype.setupHandlers=function(){var t=this,n=t.stream;void 0!==n&&(n.on("connect",(function(){t.connected=!0})),n.on("close",(function(e){t.closeStream(),t.emit("disconnect"),!0===t.closed||!1===t.options.reconnect||t.reconnects>=t.options.maxReconnectAttempts&&-1!==t.options.maxReconnectAttempts?t.emit("close"):t.scheduleReconnect()})),n.on("error",(function(e){!0===t.wasConnected&&!0===t.currentServer.didConnect||(!1===t.wasConnected&&!1===t.currentServer.didConnect&&(t.options.waitOnFirstConnect?t.currentServer.didConnect=!0:t.servers.splice(t.servers.length-1,1)),!1===t.wasConnected&&0===t.servers.length&&t.emit("error","Could not connect to server: "+e),t.closeStream())})),n.on("data",(function(n){t.inbound?t.inbound=e.concat([t.inbound,n]):t.inbound=n,t.processInbound()})))},o.prototype.sendConnect=function(){var e={lang:"node",version:p,verbose:this.options.verbose,pedantic:this.options.pedantic};void 0!==this.user&&(e.user=this.user,e.pass=this.pass),void 0!==this.token&&(e.auth_token=this.token),void 0!==this.options.name&&(e.name=this.options.name),this.stream.write(j+N+JSON.stringify(e)+R)},o.prototype.createConnection=function(){var t=[],n=[],r=0,o=this;if(null!==o.pending){var i=0;o.pending.forEach((function(s){var a=e.isBuffer(s)?s.length:e.byteLength(s);if(s===M&&null!==o.pongs&&i<o.pongs.length){var c=o.pongs[i++];void 0!==c&&(n.push(s),r+=a,t.push(c))}else s.length>3&&"P"==s[0]&&"U"==s[1]&&"B"==s[2]&&(n.push(s),r+=a)}))}this.pongs=t,this.pending=n,this.pSize=r,this.pstate=E,this.info=null,this.infoReceived=!1,this.selectServer(),this.stream=a.createConnection(this.url),this.setupHandlers()},o.prototype.initState=function(){this.ssid=1,this.subs={},this.reconnects=0,this.connected=!1,this.wasConnected=!1,this.reconnecting=!1,this.server=null,this.pending=[]},o.prototype.close=function(){this.closed=!0,this.removeAllListeners(),this.closeStream(),this.ssid=-1,this.subs=null,this.pstate=-1,this.pongs=null,this.pending=null,this.pSize=0},o.prototype.closeStream=function(){null!==this.stream&&(this.stream.end(),this.stream.destroy(),this.stream=null),!0!==this.connected&&!0!==this.closed||(this.pongs=null,this.pending=null,this.pSize=0,this.connected=!1),this.inbound=null},o.prototype.flushPending=function(){if(!1!==this.connected&&null!==this.pending&&0!==this.pending.length&&!0===this.infoReceived){var t=this,n=function(e){return t.pending=[],t.pSize=0,t.stream.write(e)};if(this.pBufs){for(var r=!0,o=0;o<this.pending.length;o++)if(!e.isBuffer(this.pending[o])){r=!1;break}if(r)return n(e.concat(this.pending,this.pSize));var i=this.pending;this.pending=[],this.pSize=0;var s=!0;for(o=0;o<i.length;o++)s=this.stream.write(i[o])&&s;return s}return n(this.pending.join(x))}},o.prototype.stripPendingSubs=function(){var e=this.pending;this.pending=[],this.pSize=0;for(var t=0;t<e.length;t++)P.test(e[t])||this.sendCommand(e[t])},o.prototype.sendCommand=function(t){if(!this.closed&&null!==this.pending&&(this.pending.push(t),e.isBuffer(t)?(this.pSize+=t.length,this.pBufs=!0):this.pSize+=e.byteLength(t),!0===this.connected))if(1===this.pending.length){var n=this;r((function(){n.flushPending()}))}else this.pSize>z&&this.flushPending()},o.prototype.sendSubscriptions=function(){var e="";for(var t in this.subs)if(this.subs.hasOwnProperty(t)){var n,r=this.subs[t];n=r.qgroup?[U,r.subject,r.qgroup,t+R]:[U,r.subject,t+R],e+=n.join(N)}e.length>0&&this.stream.write(e)},o.prototype.processInbound=function(){var t,n,o=this;for(o.stream.resume(),void 0!==o.options.yieldTime&&(n=Date.now());!o.closed&&o.inbound&&o.inbound.length>0;){switch(o.pstate){case E:var i=o.inbound.toString("binary",0,y);if(null!==(t=w.exec(i)))o.payload={subj:t[1],sid:parseInt(t[2],10),reply:t[4],size:parseInt(t[5],10)},o.payload.psize=o.payload.size+I,o.pstate=v;else if(null!==(t=O.exec(i)));else if(null!==(t=T.exec(i)))o.emit("error",t[1]);else if(null!==(t=S.exec(i))){var s=o.pongs&&o.pongs.shift();s&&s()}else if(null!==(t=C.exec(i)))o.sendCommand(k);else{if(null===(t=A.exec(i)))return;if(o.info=JSON.parse(t[1]),!0===o.checkTLSMismatch())return;if(!1===o.infoReceived){if(!1!==o.options.tls&&!0!==o.stream.encrypted){var a={socket:o.stream};if("object"==typeof o.options.tls)for(var u in o.options.tls)a[u]=o.options.tls[u];o.stream=c.connect(a,(function(){o.flushPending()})),o.setupHandlers()}o.sendConnect(),o.sendSubscriptions(),o.pongs.unshift((function(){o.connectCB()})),o.stream.write(M),o.infoReceived=!0,o.stripPendingSubs(),o.flushPending()}}break;case v:if(o.inbound.length<o.payload.psize)return void 0===o.payload.chunks&&(o.payload.chunks=[]),o.payload.chunks.push(o.inbound),o.payload.psize-=o.inbound.length,void(o.inbound=null);if(o.payload.chunks){o.payload.chunks.push(o.inbound.slice(0,o.payload.psize));var l=e.concat(o.payload.chunks,o.payload.size+I);o.payload.msg=l.toString(o.encoding,0,o.payload.size)}else o.payload.msg=o.inbound.toString(o.encoding,0,o.payload.size);if(o.inbound.length===o.payload.psize?o.inbound=null:o.inbound=o.inbound.slice(o.payload.psize),o.processMsg(),o.pstate=E,o.payload=null,void 0!==n&&Date.now()-n>o.options.yieldTime)return o.stream.pause(),void r(o.processInbound.bind(this))}if(t&&!this.closed){var h=t[0].length;h>=o.inbound.length?o.inbound=null:o.inbound=o.inbound.slice(h)}t=null}},o.prototype.processMsg=function(){var t=this.subs[this.payload.sid];if(void 0!==t&&(t.received+=1,t.timeout&&t.received>=t.expected&&(clearTimeout(t.timeout),t.timeout=null),void 0!==t.max&&(t.received===t.max?(delete this.subs[this.payload.sid],this.emit("unsubscribe",this.payload.sid,t.subject)):t.received>t.max&&(this.unsubscribe(this.payload.sid),t.callback=null)),t.callback)){var n=this.payload.msg;if(this.options.json)try{n=JSON.parse(new e(this.payload.msg,this.options.encoding).toString())}catch(e){n=e}t.callback(n,this.payload.reply,this.payload.subj,this.payload.sid)}},o.prototype.addServer=function(e){this.servers.push(new s(u.parse(e))),!0!==this.options.noRandomize&&i(this.servers)},o.prototype.flush=function(e){if(this.closed){if("function"==typeof e)return void e(new Error(G));throw new Error(G)}this.pongs&&(this.pongs.push(e),this.sendCommand(M),this.flushPending())},o.prototype.publish=function(t,n,r,o){if("function"==typeof t&&(o=t,t=void 0),n||(n=x),!t){if(!o)throw new Error(L);o(new Error(L))}if("function"==typeof n){if(o||r)return void o(new Error(B));o=n,n=x,r=void 0}if("function"==typeof r){if(o)return void o(new Error(Y));o=r,r=void 0}var i;if(i=void 0===r?"PUB "+t+N:"PUB "+t+N+r+N,"ArrayBuffer"in window&&ArrayBuffer.isView(n)&&(n=e.from(n)),e.isBuffer(n)){var s=new e(i.length+n.length+2*I+n.length.toString().length),a=s.write(i+n.length+R);n.copy(s,a),s.write(R,a+n.length),this.sendCommand(s)}else{var c=n;if(this.options.json){if("object"!=typeof n||Array.isArray(n))throw new Error(q);try{c=JSON.stringify(n)}catch(e){throw new Error(q)}}this.sendCommand(i+e.byteLength(c)+R+c+R)}if(void 0!==o)this.flush(o);else if(this.closed)throw new Error(G)},o.prototype.subscribe=function(e,t,n){if(this.closed)throw new Error(G);var r,o,i;return"function"==typeof t?(n=t,t=void 0):t&&"object"==typeof t&&(r=t.queue,o=t.max),this.ssid+=1,this.subs[this.ssid]={subject:e,callback:n,received:0},"string"==typeof r?(this.subs[this.ssid].qgroup=r,i=[U,e,r,this.ssid+R]):i=[U,e,this.ssid+R],this.sendCommand(i.join(N)),this.emit("subscribe",this.ssid,e,t),o&&this.unsubscribe(this.ssid,o),this.ssid},o.prototype.unsubscribe=function(e,t){if(e&&!this.closed){var n;n=t?[D,e,t+R]:[D,e+R],this.sendCommand(n.join(N));var r=this.subs[e];void 0!==r&&(r.max=t,(void 0===r.max||r.received>=r.max)&&(delete this.subs[e],this.emit("unsubscribe",e,r.subject)))}},o.prototype.timeout=function(e,t,n,r){if(e){var o=this.subs[e];null!==o&&(o.expected=n,o.timeout=setTimeout((function(){r(e)}),t))}},o.prototype.request=function(e,t,n,r){"function"==typeof t&&(r=t,t=x,n=null),"function"==typeof n&&(r=n,n=null);var o=$(),i=this.subscribe(o,n,(function(e,t){r(e,t)}));return this.publish(e,t,o),i},o.prototype.numSubscriptions=function(){return Object.keys(this.subs).length},o.prototype.reconnect=function(){this.closed||(this.reconnects+=1,this.createConnection(),!0===this.currentServer.didConnect&&this.emit("reconnecting"))},o.prototype.scheduleReconnect=function(){var e=this;if(0!==e.servers.length){!0===e.wasConnected&&(e.reconnecting=!0);var t=0;!0===e.servers[0].didConnect&&(t=this.options.reconnectTimeWait),setTimeout((function(){e.reconnect()}),t)}}}).call(t,n(2).Buffer,n(6).setImmediate)},function(e,t,n){(function(e,r){
/*!
    * The buffer module from node.js, for the browser.
    *
    * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
    * @license  MIT
    */
"use strict";function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,n){if(i()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,r){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,r);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return a(this,t,n,r)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?h(e,t,n):d(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}function l(t,n){if(c(n),t=s(t,n<0?0:0|m(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)t[r]=0;return t}function h(t,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|y(n,r);t=s(t,o);var i=t.write(n,r);return i!==o&&(t=t.slice(0,i)),t}function f(e,t){var n=t.length<0?0:0|m(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(t,n,r,o){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===o?new Uint8Array(n):void 0===o?new Uint8Array(n,r):new Uint8Array(n,r,o),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=f(t,n),t}function d(t,n){if(e.isBuffer(n)){var r=0|m(n.length);return t=s(t,r),0===t.length?t:(n.copy(t,0,0,r),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||K(n.length)?s(t,0):f(t,n);if("Buffer"===n.type&&Z(n.data))return f(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(t){return+t!=t&&(t=0),e.alloc(+t)}function y(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(t).length;default:if(o)return $(t).length;n=(""+n).toLowerCase(),o=!0}}function E(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(t,n,r,o,i){if(0===t.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=e.from(n,o)),e.isBuffer(n))return 0===n.length?-1:_(t,n,r,o,i);if("number"==typeof n)return n&=255,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):_(t,[n],r,o,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,c=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,c/=2,u/=2,n/=2}if(o){var l=-1;for(s=n;s<c;s++)if(i(e,s)===i(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*a}else-1!==l&&(s-=s-l),l=-1}else for(n+u>c&&(n=c-u),s=n;s>=0;s--){for(var h=!0,f=0;f<u;f++)if(i(e,s+f)!==i(t,f)){h=!1;break}if(h)return s}return-1}function w(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function O(e,t,n,r){return W($(t,e.length-n),e,n,r)}function T(e,t,n,r){return W(F(t),e,n,r)}function C(e,t,n,r){return T(e,t,n,r)}function S(e,t,n,r){return W(J(t),e,n,r)}function A(e,t,n,r){return W(H(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,c,u=e[o],l=null,h=u>239?4:u>223?3:u>191?2:1;if(o+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:i=e[o+1],128===(192&i)&&(c=(31&u)<<6|63&i,c>127&&(l=c));break;case 3:i=e[o+1],s=e[o+2],128===(192&i)&&128===(192&s)&&(c=(15&u)<<12|(63&i)<<6|63&s,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128===(192&i)&&128===(192&s)&&128===(192&a)&&(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=h}return I(r)}function I(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function U(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=z(e[i]);return o}function D(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,n,r,o,i,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<s)throw new RangeError('"value" argument is out of bounds');if(r+o>t.length)throw new RangeError("Index out of range")}function k(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function B(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Y(e,t,n,r,o){return o||B(e,t,n,4,34028234663852886e22,-34028234663852886e22),Q.write(e,t,n,r,23,4),n+4}function G(e,t,n,r,o){return o||B(e,t,n,8,17976931348623157e292,-17976931348623157e292),Q.write(e,t,n,r,52,8),n+8}function q(e){if(e=V(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function F(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function J(e){return X.toByteArray(q(e))}function W(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function K(e){return e!==e}var X=n(3),Q=n(4),Z=n(5);t.Buffer=e,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),t.kMaxLength=i(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return a(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return u(null,e,t,n)},e.allocUnsafe=function(e){return l(null,e)},e.allocUnsafeSlow=function(e){return l(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,o=n.length,i=0,s=Math.min(r,o);i<s;++i)if(t[i]!==n[i]){r=t[i],o=n[i];break}return r<o?-1:o<r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var o=e.allocUnsafe(n),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,i),i+=s.length}return o},e.byteLength=y,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):E.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,r,o,i){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),n<0||r>t.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&n>=r)return 0;if(o>=i)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,o>>>=0,i>>>=0,this===t)return 0;for(var s=i-o,a=r-n,c=Math.min(s,a),u=this.slice(o,i),l=t.slice(n,r),h=0;h<c;++h)if(u[h]!==l[h]){s=u[h],a=l[h];break}return s<a?-1:a<s?1:0},e.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},e.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var r,o=this.length;if(t=~~t,n=void 0===n?o:~~n,t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),n<0?(n+=o,n<0&&(n=0)):n>o&&(n=o),n<t&&(n=t),e.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=e.prototype;else{var i=n-t;r=new e(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},e.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},e.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},e.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},e.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),Q.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),Q.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),Q.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),Q.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;M(this,e,t,n,o,0)}var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;M(this,e,t,n,o,0)}var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):k(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):k(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):L(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):L(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);M(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);M(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):k(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):k(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):L(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n|=0,r||M(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):L(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return Y(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return Y(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return G(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return G(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=t.length&&(n=t.length),n||(n=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-n<o-r&&(o=t.length-n+r);var i,s=o-r;if(this===t&&r<n&&n<o)for(i=s-1;i>=0;--i)t[i+n]=this[i+r];else if(s<1e3||!e.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+n]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),n);return s},e.prototype.fill=function(t,n,r,o){if("string"==typeof t){if("string"==typeof n?(o=n,n=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!e.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var s;if(n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=n;s<r;++s)this[s]=t;else{var a=e.isBuffer(t)?t:$(new e(t,o).toString()),c=a.length;for(s=0;s<r-n;++s)this[s+n]=a[s%c]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(2).Buffer,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function o(e){var t,r,o,i,s,a,c=e.length;s=n(e),a=new l(3*c/4-s),o=s>0?c-4:c;var h=0;for(t=0,r=0;t<o;t+=4,r+=3)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[h++]=i>>16&255,a[h++]=i>>8&255,a[h++]=255&i;return 2===s?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[h++]=255&i):1===s&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[h++]=i>>8&255,a[h++]=255&i),a}function i(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function s(e,t,n){for(var r,o=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(i(r));return o.join("")}function a(e){for(var t,n=e.length,r=n%3,o="",i=[],a=16383,u=0,l=n-r;u<l;u+=a)i.push(s(e,u,u+a>l?l:u+a));return 1===r?(t=e[n-1],o+=c[t>>2],o+=c[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=c[t>>10],o+=c[t>>4&63],o+=c[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=r,t.toByteArray=o,t.fromByteArray=a;for(var c=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)c[f]=h[f],u[h.charCodeAt(f)]=f;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?o-1:0,f=n?-1:1,p=e[t+h];for(h+=f,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=256*i+e[t+h],h+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=u}return(p?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,h=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+h>=1?f/c:f*Math.pow(2,1-h),t*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,o),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+p]=255&s,p+=d,s/=256,u-=8);e[n+p-d]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e,r){function o(e,t){this._id=e,this._clearFn=t}var i=n(7).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,c={},u=0;t.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},t.setImmediate="function"==typeof e?e:function(e){var n=u++,r=!(arguments.length<2)&&a.call(arguments,1);return c[n]=!0,i((function(){c[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))})),n},t.clearImmediate="function"==typeof r?r:function(e){delete c[e]}}).call(t,n(6).setImmediate,n(6).clearImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?d=p.concat(d):g=-1,d.length&&a())}function a(){if(!m){var e=o(s);m=!0;for(var t=d.length;t;){for(p=d,d=[];++g<t;)p&&p[g].run();g=-1,t=d.length}p=null,m=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,h,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var p,d=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new c(e,t)),1!==d.length||m||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(e){"use strict";function r(t){var n=this;i.call(this),this.sock=new WebSocket(t),this.sock.addEventListener("open",(function(e){n.emit("connect")})),this.sock.addEventListener("message",(function(t){n.emit("data",new e(t.data))})),this.sock.addEventListener("error",(function(e){n.emit("error",e)})),this.sock.addEventListener("close",(function(e){n.emit("close")}))}var o=n(9),i=n(12).EventEmitter;o.inherits(r,i),r.prototype.end=function(){this.destroy()},r.prototype.destroy=function(){this.sock.readyState!==WebSocket.CONNECTING&&this.sock.readyState!==WebSocket.OPEN||this.sock.close()},r.prototype.write=function(e){this.sock.readyState===WebSocket.OPEN&&this.sock.send(e)},r.prototype.pause=function(){console.warn("WebSocketProxy stream pause/resume is not supported yet.")},r.prototype.resume=function(){},t.createConnection=function(e){return new r(e.format({protocol:e.protocol,slashes:e.slashes,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,path:e.path,query:e.query,hash:e.hash}))}}).call(t,n(2).Buffer)},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),c(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function c(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return v(o)||(o=c(e,o,r)),o}var i=u(e,n);if(i)return i;var s=Object.keys(n),m=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),C(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(S(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(C(n))return l(n)}var y,E="",b=!1,_=["{","}"];if(d(n)&&(b=!0,_=["[","]"]),S(n)){var O=n.name?": "+n.name:"";E=" [Function"+O+"]"}return w(n)&&(E=" "+RegExp.prototype.toString.call(n)),T(n)&&(E=" "+Date.prototype.toUTCString.call(n)),C(n)&&(E=" "+l(n)),0!==s.length||b&&0!=n.length?r<0?w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),y=b?h(e,n,r,m,s):s.map((function(t){return f(e,n,r,m,t,b)})),e.seen.pop(),p(y,E,_)):_[0]+E+_[1]}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return E(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,o){for(var i=[],s=0,a=t.length;s<a;++s)x(t,String(s))?i.push(f(e,t,n,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(f(e,t,n,r,o,!0))})),i}function f(e,t,n,r,o,i){var s,a,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),x(r,o)||(s="["+o+"]"),a||(e.seen.indexOf(u.value)<0?(a=g(n)?c(e,u.value,null):c(e,u.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n"))):a=e.stylize("[Circular]","special")),_(s)){if(i&&o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function E(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function _(e){return void 0===e}function w(e){return O(e)&&"[object RegExp]"===P(e)}function O(e){return"object"==typeof e&&null!==e}function T(e){return O(e)&&"[object Date]"===P(e)}function C(e){return O(e)&&("[object Error]"===P(e)||e instanceof Error)}function S(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function P(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}function I(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(e).replace(N,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<i;a=r[++n])s+=g(a)||!O(a)?" "+a:" "+o(a);return s},t.deprecate=function(n,o){function i(){if(!s){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),s=!0}return n.apply(this,arguments)}if(_(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var s=!1;return i};var U,D={};t.debuglog=function(e){if(_(U)&&(U=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(U)){var n=r.pid;D[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else D[e]=function(){};return D[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=y,t.isNumber=E,t.isString=v,t.isSymbol=b,t.isUndefined=_,t.isRegExp=w,t.isObject=O,t.isDate=T,t.isError=C,t.isFunction=S,t.isPrimitive=A,t.isBuffer=n(10);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",I(),t.format.apply(t,arguments))},t.inherits=n(11),t._extend=function(e,t){if(!t||!O(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(7))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),o=u.length,c=0;c<o;c++)u[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){t.connect=function(e,t){throw"TLS is not supported in the browser. Use WSS instead."}},function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&u(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}function i(e){return c(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)}function s(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function h(e){return null==e}var f=n(15);t.parse=o,t.resolve=s,t.resolveObject=a,t.format=i,t.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(m),y=["'"].concat(g),E=["%","/","?",";","#"].concat(y),v=["/","?","#"],b=255,_=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=n(17);r.prototype.parse=function(e,t,n){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var o=p.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||o&&T[o]||(r=r.substr(2),this.slashes=!0)}if(!T[o]&&(s||o&&!C[o])){for(var a=-1,u=0;u<v.length;u++){var l=r.indexOf(v[u]);-1!==l&&(-1===a||l<a)&&(a=l)}var h,d;d=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==d&&(h=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(h)),a=-1;for(u=0;u<E.length;u++){l=r.indexOf(E[u]);-1!==l&&(-1===a||l<a)&&(a=l)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),A=(u=0,g.length);u<A;u++){var P=g[u];if(P&&!P.match(_)){for(var R="",I=0,x=P.length;I<x;I++)R+=P.charCodeAt(I)>127?"x":P[I];if(!R.match(_)){var N=g.slice(0,u),U=g.slice(u+1),D=P.match(w);D&&(N.push(D[1]),U.unshift(D[2])),U.length&&(r="/"+U.join(".")+r),this.hostname=N.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){var j=this.hostname.split("."),M=[];for(u=0;u<j.length;++u){var k=j[u];M.push(k.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(k):k)}this.hostname=M.join(".")}var L=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+L,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!O[i])for(u=0,A=y.length;u<A;u++){var Y=y[u],G=encodeURIComponent(Y);G===Y&&(G=escape(Y)),r=r.split(Y).join(G)}var q=r.indexOf("#");-1!==q&&(this.hash=r.substr(q),r=r.slice(0,q));var V=r.indexOf("?");if(-1!==V?(this.search=r.substr(V),this.query=r.substr(V+1),t&&(this.query=S.parse(this.query)),r=r.slice(0,V)):t&&(this.search="",this.query={}),r&&(this.pathname=r),C[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"",k=this.search||"";this.path=L+k}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(i=S.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})),s=s.replace("#","%23"),t+o+n+s+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach((function(e){n[e]=this[e]}),this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach((function(t){"protocol"!==t&&(n[t]=e[t])})),C[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!C[e.protocol])return Object.keys(e).forEach((function(t){n[t]=e[t]})),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||T[e.protocol])n.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var i=n.pathname||"",s=n.search||"";n.path=i+s}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=u||a||n.host&&e.pathname,p=f,d=n.pathname&&n.pathname.split("/")||[],m=(o=e.pathname&&e.pathname.split("/")||[],n.protocol&&!C[n.protocol]);if(m&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),f=f&&(""===o[0]||""===d[0])),u)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),n.search=e.search,n.query=e.query;else if(!h(e.search)){if(m){n.hostname=n.host=d.shift();var g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=d.slice(-1)[0],E=(n.host||e.host)&&("."===y||".."===y)||""===y,v=0,b=d.length;b>=0;b--)y=d[b],"."==y?d.splice(b,1):".."===y?(d.splice(b,1),v++):v&&(d.splice(b,1),v--);if(!f&&!p)for(;v--;v)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),E&&"/"!==d.join("/").substr(-1)&&d.push("");var _=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){n.hostname=n.host=_?"":d.length?d.shift():"";g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return f=f||n.host&&d.length,f&&!_&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,o){!function(i){function s(e){throw RangeError(N[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(x,".");var o=e.split("."),i=a(o,t).join(".");return r+i}function u(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function l(e){return a(e,(function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+j(e)})).join("")}function h(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?D(e/C):e>>1,e+=D(e/t);e>U*O>>1;r+=_)e=D(e/U);return D(r+(U+1)*e/(e+T))}function d(e){var t,n,r,o,i,a,c,u,f,d,m=[],g=e.length,y=0,E=A,v=S;for(n=e.lastIndexOf(P),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&s("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(i=y,a=1,c=_;o>=g&&s("invalid-input"),u=h(e.charCodeAt(o++)),(u>=_||u>D((b-y)/a))&&s("overflow"),y+=u*a,f=c<=v?w:c>=v+O?O:c-v,!(u<f);c+=_)d=_-f,a>D(b/d)&&s("overflow"),a*=d;t=m.length+1,v=p(y-i,t,0==i),D(y/t)>b-E&&s("overflow"),E+=D(y/t),y%=t,m.splice(y++,0,E)}return l(m)}function m(e){var t,n,r,o,i,a,c,l,h,d,m,g,y,E,v,T=[];for(e=u(e),g=e.length,t=A,n=0,i=S,a=0;a<g;++a)m=e[a],m<128&&T.push(j(m));for(r=o=T.length,o&&T.push(P);r<g;){for(c=b,a=0;a<g;++a)m=e[a],m>=t&&m<c&&(c=m);for(y=r+1,c-t>D((b-n)/y)&&s("overflow"),n+=(c-t)*y,t=c,a=0;a<g;++a)if(m=e[a],m<t&&++n>b&&s("overflow"),m==t){for(l=n,h=_;d=h<=i?w:h>=i+O?O:h-i,!(l<d);h+=_)v=l-d,E=_-d,T.push(j(f(d+v%E,0))),l=D(v/E);T.push(j(f(l,0))),i=p(n,y,r==o),n=0,++r}++n,++t}return T.join("")}function g(e){return c(e,(function(e){return R.test(e)?d(e.slice(4).toLowerCase()):e}))}function y(e){return c(e,(function(e){return I.test(e)?"xn--"+m(e):e}))}var E=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof o&&o);E.global!==E&&E.window!==E&&E.self;var v,b=2147483647,_=36,w=1,O=26,T=38,C=700,S=72,A=128,P="-",R=/^xn--/,I=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=_-w,D=Math.floor,j=String.fromCharCode;v={version:"1.3.2",ucs2:{decode:u,encode:l},decode:d,encode:m,toASCII:y,toUnicode:g},r=function(){return v}.call(t,n,t,e),void 0===r||(e.exports=r)}()}).call(t,n(16)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";t.decode=t.parse=n(18),t.encode=t.stringify=n(19)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var u=0;u<c;++u){var l,h,f,p,d=e[u].replace(s,"%20"),m=d.indexOf(r);m>=0?(l=d.substr(0,m),h=d.substr(m+1)):(l=d,h=""),f=decodeURIComponent(l),p=decodeURIComponent(h),n(i,f)?Array.isArray(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map((function(e){return i+encodeURIComponent(n(e))})).join(t):i+encodeURIComponent(n(e[o]))})).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},function(e,t,n){(function(e){
/*!
    * Nats
    * Copyright(c) 2016 Apcera Inc. All rights reserved.
    * MIT Licensed
    */
"use strict";function r(){this.buf=new e(p),this.init()}var o=n(21),i="0.6.8",s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=36,c=12,u=10,l=0xcfd41b9100000,h=33,f=333,p=c+u;t.version=i,r.prototype.init=function(){this.setPre(),this.initSeqAndInc(),this.fillSeq()},r.prototype.initSeqAndInc=function(){this.seq=Math.floor(Math.random()*l),this.inc=Math.floor(Math.random()*(f-h)+h)},r.prototype.setPre=function(){for(var e=o.randomBytes(c),t=0;t<c;t++){var n=e[t]%a;this.buf[t]=s.charCodeAt(n)}},r.prototype.fillSeq=function(){for(var e=this.seq,t=p-1;t>=c;t--)this.buf[t]=s.charCodeAt(e%a),e=Math.floor(e/a)},r.prototype.next=function(){return this.seq+=this.inc,this.seq>l&&this.setPre(),this.initSeqAndInc(),this.fillSeq(),this.buf.toString("ascii")};var d=new r;t.reset=function(){d.init()},t.next=function(){return d.next()},t._global=d}).call(t,n(2).Buffer)},function(e,t){"use strict";var n=window.crypto||window.msCrypto;t.randomBytes=function(e,t){var r=new Uint8Array(e);return e>0&&n.getRandomValues(r),r}}])},aa42:function(e,t,n){},ae88:function(e,t,n){"use strict";t["a"]={UPDATE_USER_INFO:"UPDATE_USER_INFO",UPDATE_LOGS:"UPDATE_LOGS"}},b4c7:function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t,n){return e.ajaxRequest([{DICT_TYPE:"",MAINTAIN_FLAG:"",QUERY_TEXT:"",QUERY_TYPE:"1",page:1,pagecount:10,pageoffset:1,rows:1,service:"P0102401"}]).then(e=>{if("0"===e.code)return Promise.resolve(e.data)})}},bacb:function(e,t,n){"use strict";var r=n("e01c"),o=n.n(r),i=n("b383"),s=n.n(i),a=n("78c4"),c=n("5d89");const u=!0,l=u?c["c"].production:c["c"].development,h=o.a.create({headers:{"X-Requested-With":"XMLHttpRequest"},timeout:6e4});h.interceptors.request.use(e=>{let t=e.url;const n=e.headers=e.headers||{};e.json&&(n["Content-Type"]="application/json; charset=UTF-8",delete e.json),e.formUpload&&(n["Content-Type"]="multipart/form-data; charset=UTF-8",delete e.formUpload),e.text&&(n["Content-Type"]="text/xml; charset=utf-8",n["Data-Type"]="text",delete e.text);const r=n["Content-Type"];return"object"===typeof e.data&&r&&r.indexOf("application/x-www-form-urlencoded")>-1&&(e.data=s.a.stringify(e.data)),e.url=(l[e.apiType||""]||"")+t,e},e=>Promise.reject(e)),h.interceptors.response.use(e=>e,e=>{throw e.response?new a["a"](502):o.a.isCancel(e)?new a["a"](409):new a["a"](408)}),t["a"]=h},c697:function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t){console.log(e.a),console.log(t)}},cc8f:function(e,t,n){"use strict";class r{constructor(){this[200]="调用星网中台 api 成功。",this[400]="调用星网中台 api 时入参数据格式不合法！",this[401]="当前角色没有登录星网中台！",this[403]="当前登录的角色没有权限调用该星网中台 api！",this[404]="调用的星网中台 api 未开放，请联系管理员！",this[408]="请求星网中台服务器超时！",this[409]="请求被取消！",this[410]="星网中台会话已过期！",this[411]="被呼方不在线",this[412]="被呼方正忙",this[413]="被呼方拒绝接听",this[414]="用户忙碌，请关掉其它通信任务再进行操作",this[415]="用户已离线，请切换到在线状态再进行操作",this[416]="不能呼叫自己",this[417]="呼叫失败",this[420]="与会人员必须大于2人",this[421]="当前用户非在线状态,不能启动会议",this[423]="创建融合会议失败",this[500]="星网中台内部发生了未知错误，请联系星网开发者！",this[501]="登录失败了！",this[502]="星网中台的服务器连接错误！",this[511]="exe 程序启动失败。建议检查杀毒软件或操作系统是否禁用exe 的某些权限！",this[512]="exe 程序所需的网卡端口被占用。建议检查12700端口是否被占用！",this[513]="exe 程序异常中止！",this[514]="webServiceSocket 连接失败",this[521]="nats 服务未启动！",this[522]="nats 服务启动出错！",this[523]="nats 超过了最大连接数！",this[531]="音视频会议服务未启动！",this[532]="音视频会议超过了最大服务数！",this[541]="vc 服务未启动！",this[542]="vc 超过了最大服务数！",this[551]="webService 服务出错！",this[561]="打开监控失败！",this[562]="打开监控超时！",this[563]="打开矩阵监控失败！",this[564]="打开矩阵监控超时！"}}t["a"]=new r},e0d4:function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t,n){console.log(e),e.public.login({userAccount:"cp",password:"888888"}).then(t=>{e.public.dialVideo({userAccount:"zhangjiancheng1"})})}},e5d2:function(e,t,n){"use strict";n.r(t),t["default"]=async function(e,t,n){return e.ajaxRequest([{DICT_TYPE:"",MAINTAIN_FLAG:"",QUERY_TEXT:"",QUERY_TYPE:"1",page:1,pagecount:10,pageoffset:1,rows:1,service:"P0102401"}]).then(e=>{if("0"===e.code)return Promise.resolve(e.data)})}},f3dc:function(e,t,n){}});